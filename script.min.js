window.chartColors={danger:"rgb(220, 53, 69)",warning:"rgb(255, 193, 7)",info:"rgb(23, 162, 184)"};var urlApi="https://covid19jatimapi.agunghari.com/map/blitar",mymap=L.map("mapid").setView([-8.123375,112.178988],11),json_obj=JSON.parse(Get(urlApi)),json_arr=[];for(var i in json_obj)json_arr[json_obj[i].village]=json_obj[i];var map=L.tileLayer("https://server.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",{maxZoom:18,attribution:'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ | Map By <a href="https://idraxy.web.app" target="_blank">Draxgist & Team</a>',tileSize:512,zoomOffset:-1}).addTo(mymap),group=L.featureGroup();function Get(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}function style(t){var e=json_arr[t.properties.name],r=window.chartColors.info;return e.confirm>0?r=window.chartColors.danger:e.pdp>0&&(r=window.chartColors.warning),{fillColor:r,weight:2,opacity:1,color:"white",dashArray:"0",fillOpacity:1}}function onEachFeature(t,e){e.bindTooltip(t.properties.name,{permanent:!0,direction:"center",className:"label-village",opacity:.5})}kab_geojson.features.map(t=>{console.log(t.properties.name);var e=json_arr[t.properties.name],r=window.chartColors.info,a=e.odp+e.pdp+e.confirm,n="KOTA BLITAR"==e.city?"Kel. ":"Kec. ";e.confirm>0?r=window.chartColors.danger:e.pdp>0&&(r=window.chartColors.warning);var s='\n                        <h5 class="text-center">'+n+t.properties.name+'</h5>\n                        <table class="table table-sm table-hover">\n                            <tbody><tr class="text-success text-center">\n                                <td colspan="3" class="p-0">\n                                    <h6 class="m-0">ODP '+e.odp+'</h6>\n                                </td>\n                            </tr>\n                            \x3c!-- \n                            <tr class="text-primary text-center detail">\n                                <td class="border-0">Dipantau: 90</td>\n                                <td class="">Selesai: 76</td>\n                                <td class="border-0">Meninggal: 0</td>\n                            </tr>\n                            --\x3e\n                            <tr class="text-warning text-center">\n                                <td colspan="3" class="p-0">\n                                    <h6 class="m-0">PDP '+e.pdp+'</h6>\n                                </td>\n                            </tr>\n                            \x3c!-- \n                            <tr class="text-primary text-center detail">\n                                <td class="border-0">Dirawat: 3</td>\n                                <td class="">Sehat: 1</td>\n                                <td class="border-0">Meninggal: 0</td>\n                            </tr>\n                            --\x3e\n                            <tr class="text-danger text-center">\n                                <td colspan="3" class="p-0">\n                                    <h6 class="m-0">CONFIRM '+e.confirm+'</h6>\n                                </td>\n                            </tr>\n                            <tr class="text-primary text-center">\n                                \x3c!-- <td class="border-0">Sembuh: 0</td> --\x3e\n                                \x3c!-- <td></td> --\x3e\n                                    \x3c!-- <td class="border-0">Meninggal: 0</td> --\x3e\n                            </tr>\n                            <tr class="text-muted text-center">\n                                <td>Data Terakhir</td>\n                                <td colspan="2">'+e.last_update+"</td>\n                            </tr>\n                        </tbody></table>",o=L.latLng(parseFloat(t.properties.latitude),parseFloat(t.properties.longitude)),i=L.divIcon({className:"custom-div-icon",html:'<div class="pin" style="background:'+r+'"><i>'+("0"+a).slice(-2)+'</i></div><div class="pulse"></div>',iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-24]}),l=L.marker(o,{title:n+t.properties.name,icon:i});l.bindPopup(s),l.addTo(group)});var geojson=L.geoJson(kab_geojson,{style:style,onEachFeature:onEachFeature});mymap.addLayer(group),mymap.addLayer(geojson);